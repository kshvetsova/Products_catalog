{"ast":null,"code":"var _jsxFileName = \"/Users/katerynashvetsova/Documents/projects/react_phone-catalog/src/ProductsProvider.jsx\";\nimport React, { useMemo, useState, useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { PropTypes } from 'prop-types';\nimport products from './data/products.json';\nimport { debounce } from './helpers/debounce';\nimport { initialValue } from './helpers/search';\nexport const ProductsContext = React.createContext(); //{\n//   favourites: [],\n//   setFavorites: () => {},\n//   carts: [],\n//   setCarts: () => {},\n//   productsList: [],\n//   visibleSearch: true,\n//   setVisibleSearch: () => {},\n//   appliedValue: {},\n//   setAppliedValue: () => {},\n//   applyValue: () => {},\n//   //path: '',\n// });\n\nexport const ProductsProvider = ({\n  children\n}) => {\n  const [productsList, setProductsList] = useState(products);\n  const [visibleSearch, setVisibleSearch] = useState(true);\n  const [appliedValue, setAppliedValue] = useState(initialValue);\n  const applyValue = useCallback(debounce(setAppliedValue, 1000), []);\n  const {\n    pathname\n  } = useLocation();\n  const path = useMemo(() => pathname.slice(1), [pathname]);\n  console.log(path);\n  const [favorites, setFavorites] = useState(JSON.parse(localStorage.getItem('favorites')) || []);\n  const [carts, setCarts] = useState(JSON.parse(localStorage.getItem('carts')) || []);\n  console.log(favorites.filter);\n  console.log(products.filter(item => favorites.includes(item.id)));\n  useEffect(() => localStorage.setItem('favorites', JSON.stringify(favorites)), [favorites]);\n  useEffect(() => localStorage.setItem('carts', JSON.stringify(carts)), [carts]);\n  const contextValue = useMemo(() => ({\n    favorites,\n    setFavorites,\n    carts,\n    setCarts,\n    productsList,\n    visibleSearch,\n    setVisibleSearch,\n    appliedValue,\n    setAppliedValue,\n    applyValue,\n    path\n  }), [favorites, carts, visibleSearch, setVisibleSearch, appliedValue]);\n  return /*#__PURE__*/React.createElement(ProductsContext.Provider, {\n    value: contextValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, children);\n};\nProductsProvider.propTypes = {\n  children: PropTypes.array.isRequired\n};","map":{"version":3,"sources":["/Users/katerynashvetsova/Documents/projects/react_phone-catalog/src/ProductsProvider.jsx"],"names":["React","useMemo","useState","useEffect","useCallback","useLocation","PropTypes","products","debounce","initialValue","ProductsContext","createContext","ProductsProvider","children","productsList","setProductsList","visibleSearch","setVisibleSearch","appliedValue","setAppliedValue","applyValue","pathname","path","slice","console","log","favorites","setFavorites","JSON","parse","localStorage","getItem","carts","setCarts","filter","item","includes","id","setItem","stringify","contextValue","propTypes","array","isRequired"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { PropTypes } from 'prop-types';\nimport products from './data/products.json';\nimport { debounce } from './helpers/debounce';\nimport { initialValue } from './helpers/search';\n\n\nexport const ProductsContext = React.createContext()//{\n//   favourites: [],\n//   setFavorites: () => {},\n//   carts: [],\n//   setCarts: () => {},\n//   productsList: [],\n//   visibleSearch: true,\n//   setVisibleSearch: () => {},\n//   appliedValue: {},\n//   setAppliedValue: () => {},\n//   applyValue: () => {},\n//   //path: '',\n\n// });\n\nexport const ProductsProvider = ({ children }) => {\n  const [productsList, setProductsList] = useState(products);\n  const [visibleSearch, setVisibleSearch] = useState(true);\n  const [appliedValue, setAppliedValue] = useState(initialValue);\n  const applyValue = useCallback(debounce(setAppliedValue, 1000), []);\n\n  const { pathname } = useLocation();\n  const path = useMemo(() => pathname.slice(1), [pathname]);\n  console.log(path);\n\n  const [favorites, setFavorites] = useState(\n    JSON.parse(localStorage.getItem('favorites')) || []\n  );\n  const [carts, setCarts] = useState(JSON.parse(localStorage.getItem('carts')) || []);\n  \n  \n  console.log(favorites.filter);\n  console.log(products.filter(item => favorites.includes(item.id)));\n  \n  useEffect(() => (\n    localStorage.setItem('favorites', JSON.stringify(favorites))\n  ), [favorites]);\n\n  useEffect(() => (\n    localStorage.setItem('carts', JSON.stringify(carts))\n  ), [carts]);\n\n  const contextValue = useMemo(() => (\n    {\n      favorites,\n      setFavorites,\n      carts,\n      setCarts,\n      productsList,\n      visibleSearch,\n      setVisibleSearch,\n      appliedValue,\n      setAppliedValue,\n      applyValue,\n      path,\n    }\n  ), [favorites, carts, visibleSearch, setVisibleSearch, appliedValue]);\n\n\n  return (\n    <ProductsContext.Provider value={contextValue}>\n      {children}\n    </ProductsContext.Provider>\n  )\n}\n\nProductsProvider.propTypes = {\n  children: PropTypes.array.isRequired,\n};"]},"metadata":{},"sourceType":"module"}